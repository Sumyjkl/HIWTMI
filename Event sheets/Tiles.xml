<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Tiles</name>
    <events>
        <comment># TILES&#x0D;&#x0A;# tiles_ map_&#x0D;&#x0A;# Makes all the tiles work and I don&apos;t really know how&#x0D;&#x0A;</comment>
        <comment>map</comment>
        <variable constant="0" name="map_caveDensity" sid="280220761036169" static="0" type="number">30</variable>
        <variable constant="0" name="map_gemDensity" sid="392666142481395" static="0" type="number">10</variable>
        <variable comment="size of tiles in tilemap" constant="0" name="tileMapSize" sid="565947161547990" static="0" type="number">16</variable>
        <comment></comment>
        <event-block sid="963287702408997">
            <conditions>
                <condition id="0" name="On function" sid="973304443815738" type="f">
                    <param id="0" name="Name">&quot;tiles_arrayInit&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="986538933870478">
                    <conditions />
                    <actions>
                        <action id="1" name="Set size" sid="171212254621720" type="tiles_TileArray">
                            <param id="0" name="Width">ceil(tiles_TileMap.Width/16) + 1</param>
                            <param id="1" name="Height">ceil(tiles_TileMap.Height/16) + 1</param>
                            <param id="2" name="Depth">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="908237094945619">
            <conditions>
                <condition id="0" name="On function" sid="945950266871623" type="f">
                    <param id="0" name="Name">&quot;tiles_fillAll&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="252761038984952">
                    <conditions>
                        <condition id="3" name="For each element" sid="676405248020600" type="tiles_TileArray">
                            <param id="0" name="Axes">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="3" name="Set at XY" sid="712096231995486" type="tiles_TileArray">
                            <param id="0" name="X">tiles_TileArray.CurX</param>
                            <param id="1" name="Y">tiles_TileArray.CurY</param>
                            <param id="2" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="157475233858082">
            <conditions>
                <condition id="0" name="On function" sid="133388061900011" type="f">
                    <param id="0" name="Name">&quot;tiles_generate&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="128004711838002">
                    <conditions />
                    <actions>
                        <action id="0" name="Call function" sid="150668295927266" type="f">
                            <param id="0" name="Name">&quot;tiles_fillAll&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="106714840028705">
                    <conditions>
                        <condition id="-10" name="For" sid="686363349212013" type="System">
                            <param id="0" name="Name">&quot;&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">map_caveDensity</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="720935500654959" type="f">
                            <param id="0" name="Name">&quot;tiles_addPrefab&quot;</param>
                            <param id="1" name="Parameter {n}">int(random(tiles_TileArray.Width)){###}int(random(tiles_TileArray.Height)){###}tiles_tilePrefabs.At(int(random(tiles_tilePrefabs.Width)), 0)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="744107074572621">
            <conditions>
                <condition id="0" name="On function" sid="389153932919627" type="f">
                    <param id="0" name="Name">&quot;tiles_init&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="915761219617849">
                    <conditions />
                    <actions>
                        <action id="0" name="Call function" sid="743758045927497" type="f">
                            <param id="0" name="Name">&quot;tiles_generate&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="761897716833342" type="f">
                            <param id="0" name="Name">&quot;tiles_updateAll&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="758812693287841">
            <conditions>
                <condition id="0" name="On function" sid="657196182573763" type="f">
                    <param id="0" name="Name">&quot;tiles_updateAll&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="285551344702062">
                    <conditions>
                        <condition id="-10" name="For" sid="556801849863764" type="System">
                            <param id="0" name="Name">&quot;X&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">tiles_TileArray.Width</param>
                        </condition>
                        <condition id="-10" name="For" sid="488129711134443" type="System">
                            <param id="0" name="Name">&quot;Y&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">tiles_TileArray.Height</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="570699078615109">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="299367754006571" type="f">
                                    <param id="0" name="Name">&quot;tiles_update&quot;</param>
                                    <param id="1" name="Parameter {n}">loopindex(&quot;X&quot;){###}loopindex(&quot;Y&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="901171215491571">
            <conditions>
                <condition id="0" name="On function" sid="489313052171972" type="f">
                    <param id="0" name="Name">&quot;tiles_loadToArray&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="389060548664567">
                    <conditions>
                        <condition id="-10" name="For" sid="534761560486239" type="System">
                            <param id="0" name="Name">&quot;X&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">tiles_TileArray.Width</param>
                        </condition>
                        <condition id="-10" name="For" sid="231385465842184" type="System">
                            <param id="0" name="Name">&quot;Y&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">tiles_TileArray.Height</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="152952008969266">
                            <conditions>
                                <condition id="0" name="Compare tile at" sid="878777936520645" type="tiles_TileMap">
                                    <param id="0" name="Tile X">loopindex(&quot;X&quot;)</param>
                                    <param id="1" name="Tile Y">loopindex(&quot;Y&quot;)</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Tile">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="3" name="Set at XY" sid="276364050212119" type="tiles_TileArray">
                                    <param id="0" name="X">loopindex(&quot;X&quot;)</param>
                                    <param id="1" name="Y">loopindex(&quot;Y&quot;)</param>
                                    <param id="2" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <comment>filter tile</comment>
        <event-block sid="447865728092840">
            <conditions>
                <condition id="0" name="On function" sid="834509068426243" type="f">
                    <param id="0" name="Name">&quot;tiles_update&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <variable constant="0" name="tmpX" sid="350315454088608" static="0" type="number">0</variable>
                <variable constant="0" name="tmpY" sid="321243515062226" static="0" type="number">0</variable>
                <variable constant="0" name="tmpZ" sid="996425312728605" static="0" type="number">0</variable>
                <variable constant="0" name="tmpReturn" sid="301599638159598" static="0" type="text"></variable>
                <event-block sid="907319328487408">
                    <conditions />
                    <actions>
                        <action id="-9" name="Set value" sid="100379796081090" type="System">
                            <param id="0" name="Variable">tmpX</param>
                            <param id="1" name="Value">f.Param(0)</param>
                        </action>
                        <action id="-9" name="Set value" sid="159326607219350" type="System">
                            <param id="0" name="Variable">tmpY</param>
                            <param id="1" name="Value">f.Param(1)</param>
                        </action>
                        <action id="-9" name="Set value" sid="797424279481534" type="System">
                            <param id="0" name="Variable">tmpZ</param>
                            <param id="1" name="Value">tiles_TileArray.At(tmpX, tmpY)</param>
                        </action>
                        <action id="-9" name="Set value" sid="913888261417959" type="System">
                            <param id="0" name="Variable">tmpReturn</param>
                            <param id="1" name="Value">&quot;&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>same</comment>
                <event-block disabled="1" sid="358177624613388">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="306701695151237" type="System">
                            <param id="0" name="Variable">tmpZ</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block disabled="1" sid="445210110071637">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="595615510477120" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX</param>
                                    <param id="1" name="Y">tmpY-1</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="252747602559663" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="578838456963779">
                            <conditions>
                                <condition id="-22" name="Else" sid="614632065935752" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="582987006389500" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="468702044200596">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="158036631107374" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX</param>
                                    <param id="1" name="Y">tmpY+1</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="157430045313408" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="707037486611583">
                            <conditions>
                                <condition id="-22" name="Else" sid="316954714651452" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="705391514905461" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="892759798659755">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="533855761070992" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX-1</param>
                                    <param id="1" name="Y">tmpY</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="752342993001267" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="437949568013481">
                            <conditions>
                                <condition id="-22" name="Else" sid="654244080390010" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="254078086374985" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="585356216849431">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="995340597405022" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX+1</param>
                                    <param id="1" name="Y">tmpY</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="101688824429661" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="179028275668953">
                            <conditions>
                                <condition id="-22" name="Else" sid="184486949544013" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="400336477517701" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="209532765883685">
                            <conditions />
                            <actions>
                                <action id="1" name="Set tile" sid="998144578622293" type="tiles_TileMap">
                                    <param id="0" name="Tile X">tmpX</param>
                                    <param id="1" name="Tile Y">tmpY</param>
                                    <param id="2" name="Tile">(tmpZ-1) * 20 + tiles_tileForms.Get(tmpReturn)</param>
                                    <param id="3" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>any with other rules</comment>
                <event-block sid="222483672818975">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="746562012963354" type="System">
                            <param id="0" name="Variable">tmpZ</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <comment></comment>
                        <event-block sid="674733804673089">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="560144004313614" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX</param>
                                    <param id="1" name="Y">tmpY-1</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="765445939856393" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="462694123510595">
                            <conditions>
                                <condition id="-22" name="Else" sid="800460360882088" type="System" />
                                <condition id="1" inverted="1" name="Compare at XY" sid="997369227758141" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX</param>
                                    <param id="1" name="Y">tmpY-1</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="707106791544554" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="297325446163343">
                            <conditions>
                                <condition id="-22" name="Else" sid="305165710137703" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="563854576367248" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment></comment>
                        <event-block sid="836180019823125">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="205206444384909" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX</param>
                                    <param id="1" name="Y">tmpY+1</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="652051209371370" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="628831295874704">
                            <conditions>
                                <condition id="-22" name="Else" sid="729445616335983" type="System" />
                                <condition id="1" inverted="1" name="Compare at XY" sid="630674942225496" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX</param>
                                    <param id="1" name="Y">tmpY+1</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="292875318788504" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="976604485494224">
                            <conditions>
                                <condition id="-22" name="Else" sid="425099814086090" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="913233628512449" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment></comment>
                        <event-block sid="639917175899586">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="169719230024563" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX-1</param>
                                    <param id="1" name="Y">tmpY</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="215153340407645" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="440295974175615">
                            <conditions>
                                <condition id="-22" name="Else" sid="260366788462982" type="System" />
                                <condition id="1" inverted="1" name="Compare at XY" sid="281273249563625" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX-1</param>
                                    <param id="1" name="Y">tmpY</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="389756450630470" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="108407617676607">
                            <conditions>
                                <condition id="-22" name="Else" sid="240309000963425" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="561819216953864" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment></comment>
                        <event-block sid="596039210534580">
                            <conditions>
                                <condition id="1" name="Compare at XY" sid="627415055429409" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX+1</param>
                                    <param id="1" name="Y">tmpY</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">tmpZ</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="264358358668121" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="907469788941575">
                            <conditions>
                                <condition id="-22" name="Else" sid="571233896225240" type="System" />
                                <condition id="1" inverted="1" name="Compare at XY" sid="245644248116054" type="tiles_TileArray">
                                    <param id="0" name="X">tmpX+1</param>
                                    <param id="1" name="Y">tmpY</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="223212708638558" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;1&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="407109217760012">
                            <conditions>
                                <condition id="-22" name="Else" sid="170147342169179" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="301398634833193" type="System">
                                    <param id="0" name="Variable">tmpReturn</param>
                                    <param id="1" name="Value">tmpReturn &amp; &quot;0&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>only if has key</comment>
                        <event-block sid="781502251980779">
                            <conditions>
                                <condition id="3" name="Has key" sid="410911687969922" type="tiles_tileForms">
                                    <param id="0" name="Key">tmpReturn</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set tile" sid="592946405832001" type="tiles_TileMap">
                                    <param id="0" name="Tile X">tmpX</param>
                                    <param id="1" name="Tile Y">tmpY</param>
                                    <param id="2" name="Tile">(tmpZ-1) * 20 + tiles_tileForms.Get(tmpReturn)</param>
                                    <param id="3" name="State">0</param>
                                </action>
                                <action disabled="1" id="0" name="Call function" sid="698581437371226" type="f">
                                    <param id="0" name="Name">&quot;tiles_solidTest&quot;</param>
                                    <param id="1" name="Parameter {n}">tmpX{###}tmpY{###}tmpZ{###}tmpReturn</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="399317548575313">
                            <conditions>
                                <condition id="-22" name="Else" sid="966482924115522" type="System" />
                            </conditions>
                            <actions>
                                <action disabled="1" id="1" name="Set tile" sid="212938253795595" type="tiles_TileMap">
                                    <param id="0" name="Tile X">tmpX</param>
                                    <param id="1" name="Tile Y">tmpY</param>
                                    <param id="2" name="Tile">11</param>
                                    <param id="3" name="State">0</param>
                                </action>
                                <action id="0" name="Erase tile" sid="659584445216042" type="tiles_TileMap">
                                    <param id="0" name="Tile X">tmpX</param>
                                    <param id="1" name="Tile Y">tmpY</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="509978630687408">
                    <conditions>
                        <condition id="-22" name="Else" sid="235047133378194" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Erase tile" sid="938916226391927" type="tiles_TileMap">
                            <param id="0" name="Tile X">tmpX</param>
                            <param id="1" name="Tile Y">tmpY</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block disabled="1" sid="376165961297508">
            <conditions>
                <condition id="0" name="On function" sid="384148638884869" type="f">
                    <param id="0" name="Name">&quot;tiles_solidTest&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block disabled="1" sid="231682879853470">
                    <conditions>
                        <condition id="-21" name="Is between values" sid="234630037137226" type="System">
                            <param id="0" name="Value">tiles_tileForms.Get(f.Param(3))</param>
                            <param id="1" name="Lower bound">10</param>
                            <param id="2" name="Upper bound">19</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="497775114556088" type="System">
                            <param id="0" name="First value">f.Param(2)</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">4</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block disabled="1" sid="641124910262215">
                            <conditions>
                                <condition behavior="Solid" id="0" name="Is enabled" sid="294722537698311" type="tiles_TileMap" />
                            </conditions>
                            <actions>
                                <action id="0" name="Erase tile" sid="911549424789615" type="tiles_TileMap">
                                    <param id="0" name="Tile X">f.Param(0)</param>
                                    <param id="1" name="Tile Y">f.Param(1)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="751758259906153">
                            <conditions>
                                <condition behavior="Solid" id="0" inverted="1" name="Is enabled" sid="996889936114269" type="tiles_TileMap" />
                            </conditions>
                            <actions>
                                <action id="1" name="Set tile" sid="765115468277115" type="tiles_TileMap">
                                    <param id="0" name="Tile X">f.Param(0)</param>
                                    <param id="1" name="Tile Y">f.Param(1)</param>
                                    <param id="2" name="Tile">(f.Param(2)-1) * 20 + tiles_tileForms.Get(f.Param(3))</param>
                                    <param id="3" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block disabled="1" sid="637557372270243">
                    <conditions>
                        <condition id="-22" name="Else" sid="745726074259311" type="System" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block disabled="1" sid="526284281678856">
                            <conditions>
                                <condition behavior="Solid" id="0" name="Is enabled" sid="798410267791051" type="tiles_TileMap" />
                            </conditions>
                            <actions>
                                <action id="1" name="Set tile" sid="186293854219968" type="tiles_TileMap">
                                    <param id="0" name="Tile X">f.Param(0)</param>
                                    <param id="1" name="Tile Y">f.Param(1)</param>
                                    <param id="2" name="Tile">(f.Param(2)-1) * 20 + tiles_tileForms.Get(f.Param(3))</param>
                                    <param id="3" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block disabled="1" sid="832768068215212">
                            <conditions>
                                <condition behavior="Solid" id="0" inverted="1" name="Is enabled" sid="260991731877805" type="tiles_TileMap" />
                            </conditions>
                            <actions>
                                <action id="0" name="Erase tile" sid="781223592322678" type="tiles_TileMap">
                                    <param id="0" name="Tile X">f.Param(0)</param>
                                    <param id="1" name="Tile Y">f.Param(1)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="907319113608112">
            <conditions>
                <condition id="0" name="On function" sid="878978654363176" type="f">
                    <param id="0" name="Name">&quot;tiles_solidEnable&quot;</param>
                </condition>
            </conditions>
            <actions />
        </event-block>
        <comment>make rules for filter</comment>
        <event-block disabled="1" sid="138849806046654">
            <conditions>
                <condition id="0" name="On function" sid="932924502188828" type="f">
                    <param id="0" name="Name">&quot;tiles_formsInit&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <comment>no top</comment>
                <event-block disabled="1" sid="945432748462114">
                    <conditions />
                    <actions>
                        <action id="0" name="Add key" sid="772053788955178" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0000&quot;</param>
                            <param id="1" name="Value">10</param>
                        </action>
                        <action id="0" name="Add key" sid="447561607679362" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0100&quot;</param>
                            <param id="1" name="Value">11</param>
                        </action>
                        <action id="0" name="Add key" sid="543494442629955" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0010&quot;</param>
                            <param id="1" name="Value">12</param>
                        </action>
                        <action id="0" name="Add key" sid="662307578069091" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0001&quot;</param>
                            <param id="1" name="Value">13</param>
                        </action>
                        <action id="0" name="Add key" sid="421887672701664" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0110&quot;</param>
                            <param id="1" name="Value">14</param>
                        </action>
                        <action id="0" name="Add key" sid="470553362310744" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0101&quot;</param>
                            <param id="1" name="Value">15</param>
                        </action>
                        <action id="0" name="Add key" sid="385377582638413" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0011&quot;</param>
                            <param id="1" name="Value">16</param>
                        </action>
                        <action id="0" name="Add key" sid="335057189213110" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0111&quot;</param>
                            <param id="1" name="Value">17</param>
                        </action>
                    </actions>
                </event-block>
                <comment>other</comment>
                <event-block disabled="1" sid="921400414935235">
                    <conditions />
                    <actions>
                        <action id="0" name="Add key" sid="112617174084208" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1100&quot;</param>
                            <param id="1" name="Value">20</param>
                        </action>
                    </actions>
                </event-block>
                <comment>top</comment>
                <event-block disabled="1" sid="513679087851640">
                    <conditions />
                    <actions>
                        <action id="0" name="Add key" sid="698580068346926" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1000&quot;</param>
                            <param id="1" name="Value">21</param>
                        </action>
                        <action id="0" name="Add key" sid="913741315219043" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1010&quot;</param>
                            <param id="1" name="Value">22</param>
                        </action>
                        <action id="0" name="Add key" sid="121684559081041" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1001&quot;</param>
                            <param id="1" name="Value">23</param>
                        </action>
                        <action id="0" name="Add key" sid="221648689849172" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1110&quot;</param>
                            <param id="1" name="Value">24</param>
                        </action>
                        <action id="0" name="Add key" sid="455821971171528" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1101&quot;</param>
                            <param id="1" name="Value">25</param>
                        </action>
                        <action id="0" name="Add key" sid="736657698884235" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1011&quot;</param>
                            <param id="1" name="Value">26</param>
                        </action>
                        <action id="0" name="Add key" sid="105920797817643" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1111&quot;</param>
                            <param id="1" name="Value">27</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="283490411926140">
            <conditions>
                <condition id="0" name="On function" sid="795693669871471" type="f">
                    <param id="0" name="Name">&quot;tiles_formsInit&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <comment>no top</comment>
                <event-block sid="679218218868704">
                    <conditions />
                    <actions>
                        <action id="0" name="Add key" sid="728012905464133" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1111&quot;</param>
                            <param id="1" name="Value">10</param>
                        </action>
                        <action id="0" name="Add key" sid="247405520050427" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1011&quot;</param>
                            <param id="1" name="Value">11</param>
                        </action>
                        <action id="0" name="Add key" sid="972937900676728" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1101&quot;</param>
                            <param id="1" name="Value">12</param>
                        </action>
                        <action id="0" name="Add key" sid="716992095551030" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1110&quot;</param>
                            <param id="1" name="Value">13</param>
                        </action>
                        <action id="0" name="Add key" sid="676045667812388" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1001&quot;</param>
                            <param id="1" name="Value">14</param>
                        </action>
                        <action id="0" name="Add key" sid="686315499104196" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1010&quot;</param>
                            <param id="1" name="Value">15</param>
                        </action>
                        <action id="0" name="Add key" sid="820710397477749" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1100&quot;</param>
                            <param id="1" name="Value">16</param>
                        </action>
                        <action id="0" name="Add key" sid="323681598150787" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;1000&quot;</param>
                            <param id="1" name="Value">17</param>
                        </action>
                    </actions>
                </event-block>
                <comment>other</comment>
                <event-block sid="605789664943905">
                    <conditions />
                    <actions>
                        <action id="0" name="Add key" sid="502230541217786" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0011&quot;</param>
                            <param id="1" name="Value">20</param>
                        </action>
                    </actions>
                </event-block>
                <comment>top</comment>
                <event-block sid="516429999962458">
                    <conditions />
                    <actions>
                        <action id="0" name="Add key" sid="998199009159485" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0111&quot;</param>
                            <param id="1" name="Value">21</param>
                        </action>
                        <action id="0" name="Add key" sid="337637463167463" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0101&quot;</param>
                            <param id="1" name="Value">22</param>
                        </action>
                        <action id="0" name="Add key" sid="808321094935617" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0110&quot;</param>
                            <param id="1" name="Value">23</param>
                        </action>
                        <action id="0" name="Add key" sid="184965322944824" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0001&quot;</param>
                            <param id="1" name="Value">24</param>
                        </action>
                        <action id="0" name="Add key" sid="393165737886154" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0010&quot;</param>
                            <param id="1" name="Value">25</param>
                        </action>
                        <action id="0" name="Add key" sid="788757208043950" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0100&quot;</param>
                            <param id="1" name="Value">26</param>
                        </action>
                        <action id="0" name="Add key" sid="896166058853743" type="tiles_tileForms">
                            <param id="0" name="Key">&quot;0000&quot;</param>
                            <param id="1" name="Value">27</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>update 3x3 square around object</comment>
        <event-block sid="626544507806294">
            <conditions>
                <condition id="0" name="On function" sid="169838270010228" type="f">
                    <param id="0" name="Name">&quot;tiles_updateArea&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="658818847106943">
                    <conditions>
                        <condition id="-10" name="For" sid="568238907706878" type="System">
                            <param id="0" name="Name">&quot;X&quot;</param>
                            <param id="1" name="Start index">f.Param(0)-1</param>
                            <param id="2" name="End index">f.Param(0)+1</param>
                        </condition>
                        <condition id="-10" name="For" sid="611014055848967" type="System">
                            <param id="0" name="Name">&quot;Y&quot;</param>
                            <param id="1" name="Start index">f.Param(1)-1</param>
                            <param id="2" name="End index">f.Param(1)+1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="721661566804632">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="234087986005763" type="f">
                                    <param id="0" name="Name">&quot;tiles_update&quot;</param>
                                    <param id="1" name="Parameter {n}">loopindex(&quot;X&quot;){###}loopindex(&quot;Y&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="250471675010128">
            <conditions>
                <condition id="0" name="On function" sid="827190985416966" type="f">
                    <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="928429792661860">
                    <conditions />
                    <actions>
                        <action id="3" name="Set at XY" sid="371501347866542" type="tiles_TileArray">
                            <param id="0" name="X">f.Param(0)</param>
                            <param id="1" name="Y">f.Param(1)</param>
                            <param id="2" name="Value">f.Param(2)</param>
                        </action>
                        <action id="0" name="Call function" sid="613645528541835" type="f">
                            <param id="0" name="Name">&quot;tiles_updateArea&quot;</param>
                            <param id="1" name="Parameter {n}">f.Param(0){###}f.Param(1)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="816601443727611">
            <conditions>
                <condition id="0" name="On function" sid="444853096721593" type="f">
                    <param id="0" name="Name">&quot;tiles_addPrefab&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="541139080972744">
                    <conditions>
                        <condition id="-10" name="For" sid="790814112714841" type="System">
                            <param id="0" name="Name">&quot;X&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">len(tokenat(f.Param(2), 4, &quot;;&quot;))</param>
                        </condition>
                        <condition id="-10" name="For" sid="799597642712096" type="System">
                            <param id="0" name="Name">&quot;Y&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">tokencount(f.Param(2), &quot;;&quot;) - 4</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="tmpLine" sid="703897766938339" static="0" type="text"></variable>
                        <event-block sid="734766513677690">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="309171776756606" type="System">
                                    <param id="0" name="Variable">tmpLine</param>
                                    <param id="1" name="Value">tokenat(f.Param(2), loopindex(&quot;Y&quot;) + 4, &quot;;&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="278882545011978">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="672202737087034" type="System">
                                    <param id="0" name="First value">mid(tmpLine, loopindex(&quot;X&quot;), 1)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;1&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="162289254927526" type="f">
                                    <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                                    <param id="1" name="Parameter {n}">loopindex(&quot;X&quot;) + f.Param(0){###}loopindex(&quot;Y&quot;) + f.Param(1){###}int(tokenat(f.Param(2), 0, &quot;;&quot;))</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="624498427699882">
            <conditions>
                <condition id="0" name="On function" sid="188337630214372" type="f">
                    <param id="0" name="Name">&quot;tiles_prefabInit&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="529524009504690">
                    <conditions />
                    <actions>
                        <action id="0" name="Clear" sid="598255883462094" type="tiles_tilePrefabs" />
                    </actions>
                </event-block>
                <event-block sid="463729552200259">
                    <conditions>
                        <condition id="-10" name="For" sid="403062879993150" type="System">
                            <param id="0" name="Name">&quot;&quot;</param>
                            <param id="1" name="Start index">1</param>
                            <param id="2" name="End index">tokencount(f.Param(0), &quot;CAVE&quot;)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="947899419212533">
                            <conditions />
                            <actions>
                                <action id="5" name="Push" sid="319610252790295" type="tiles_tilePrefabs">
                                    <param id="0" name="Where">0</param>
                                    <param id="1" name="Value">tokenat(f.Param(0), loopindex, &quot;CAVE&quot;)</param>
                                    <param id="2" name="Axis">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="627840374160275">
            <conditions>
                <condition id="1" name="On any touch end" sid="128876411542672" type="Touch" />
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="568363630979910">
                    <conditions>
                        <condition id="1" name="Compare at XY" sid="611378071058714" type="tiles_TileArray">
                            <param id="0" name="X">floor(Touch.X / tileMapSize)</param>
                            <param id="1" name="Y">floor(Touch.Y / tileMapSize)</param>
                            <param id="2" name="Comparison">1</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="212585492287788" type="f">
                            <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                            <param id="1" name="Parameter {n}">floor(Touch.X / tileMapSize){###}floor(Touch.Y / tileMapSize){###}0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="803607912325109">
                    <conditions>
                        <condition id="-22" name="Else" sid="628169132973054" type="System" />
                    </conditions>
                    <actions>
                        <action disabled="1" id="0" name="Call function" sid="579094548122240" type="f">
                            <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                            <param id="1" name="Parameter {n}">floor(Touch.X / tileMapSize){###}floor(Touch.Y / tileMapSize){###}3</param>
                        </action>
                        <action id="0" name="Call function" sid="441355050426531" type="f">
                            <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                            <param id="1" name="Parameter {n}">floor(Touch.X / tileMapSize){###}floor(Touch.Y / tileMapSize){###}4</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="685433120079106">
            <conditions>
                <condition id="0" name="On function" sid="571503041372727" type="f">
                    <param id="0" name="Name">&quot;tiles_Start&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="150530025429614" type="f">
                    <param id="0" name="Name">&quot;tiles_formsInit&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="0" name="Call function" sid="513689361128271" type="f">
                    <param id="0" name="Name">&quot;tiles_arrayInit&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action disabled="1" id="0" name="Call function" sid="728376936664606" type="f">
                    <param id="0" name="Name">&quot;tiles_loadToArray&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="0" name="Call function" sid="288457228709723" type="f">
                    <param id="0" name="Name">&quot;tiles_prefabInit&quot;</param>
                    <param id="1" name="Parameter {n}">ldr_Storage.Get(&quot;caves&quot;)</param>
                </action>
                <action id="0" name="Call function" sid="711645800190124" type="f">
                    <param id="0" name="Name">&quot;tiles_init&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="11" name="Set collisions enabled" sid="837919801188931" type="freeCam">
                    <param id="0" name="Collisions">0</param>
                </action>
                <action id="0" name="Call function" sid="239845190258320" type="f">
                    <param id="0" name="Name">&quot;fogClear&quot;</param>
                    <param id="1" name="Parameter {n}">fog.PositionToTileX(player.X){###}fog.PositionToTileY(player.Y){###}3</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="673228956009150">
            <conditions>
                <condition behavior="Platform" id="0" name="Is moving" sid="593911060585441" type="player" />
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="457335384618906" type="f">
                    <param id="0" name="Name">&quot;fogClear&quot;</param>
                    <param id="1" name="Parameter {n}">fog.PositionToTileX(player.X){###}fog.PositionToTileY(player.Y){###}3</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="606562690550971">
            <conditions>
                <condition id="0" name="On function" sid="800025650395219" type="f">
                    <param id="0" name="Name">&quot;fogClear&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="822860554317689">
                    <conditions />
                    <actions>
                        <action id="2" name="Erase tile range" sid="830995515446198" type="fog">
                            <param id="0" name="Tile X">f.Param(0) - f.Param(2)</param>
                            <param id="1" name="Tile Y">f.Param(1) - f.Param(2)</param>
                            <param id="2" name="Width">f.Param(2) * 2</param>
                            <param id="3" name="Height">f.Param(2) * 2</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="148484281737503">
            <conditions />
            <actions />
        </event-block>
    </events>
</c2eventsheet>
