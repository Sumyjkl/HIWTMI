<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>gameLogic</name>
    <events>
        <comment># gameLogic&#x0D;&#x0A;# gl_&#x0D;&#x0A;# turrets, doors etc. The part of the game that is game.&#x0D;&#x0A;</comment>
        <include>tileEvents</include>
        <include>turretEvents</include>
        <include>playerEvents</include>
        <include>projectileEvents</include>
        <include>inventoryEvents</include>
        <variable constant="0" name="ladder_offsetX" sid="951898758445304" static="0" type="number">4</variable>
        <event-group description="" sid="792767968556085" title="ladder">
            <sub-events>
                <event-block sid="817455153067537">
                    <conditions>
                        <condition id="0" name="On function" sid="226941830366939" type="f">
                            <param id="0" name="Name">&quot;ladder_create&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="686194583953082">
                            <conditions />
                            <actions>
                                <action id="-3" name="Create object" sid="207325102406844" type="System">
                                    <param id="0" name="Object to create">ladder</param>
                                    <param id="1" name="Layer">&quot;tiles&quot;</param>
                                    <param id="2" name="X">f.Param(0) * tileMapSize + ladder_offsetX</param>
                                    <param id="3" name="Y">f.Param(1) * tileMapSize</param>
                                </action>
                                <action id="-1" name="Set X" sid="734481971214577" type="ladderPlatform">
                                    <param id="0" name="X">Self.X - ladder_offsetX</param>
                                </action>
                                <action id="4" name="Set at XYZ" sid="797139181368912" type="TileArray">
                                    <param id="0" name="X">f.Param(0)</param>
                                    <param id="1" name="Y">f.Param(1)</param>
                                    <param id="2" name="Z">0</param>
                                    <param id="3" name="Value">501</param>
                                </action>
                            </actions>
                            <sub-events>
                                <variable constant="0" name="var" sid="897044752421152" static="0" type="number">0</variable>
                                <event-block sid="111872760935872">
                                    <conditions>
                                        <condition id="-10" name="For" sid="215723581184849" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">1</param>
                                            <param id="2" name="End index">5</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="465073469984598">
                                            <conditions>
                                                <condition id="2" name="Compare at XYZ" sid="845569301262973" type="TileArray">
                                                    <param id="0" name="X">f.Param(0)</param>
                                                    <param id="1" name="Y">f.Param(1)+loopindex</param>
                                                    <param id="2" name="Z">0</param>
                                                    <param id="3" name="Comparison">0</param>
                                                    <param id="4" name="Value">0</param>
                                                </condition>
                                                <condition disabled="1" id="-8" name="Compare two values" sid="156047643121655" type="System">
                                                    <param id="0" name="First value">f.Call(&quot;ladder_exists&quot;, f.Param(0), f.Param(1) + loopindex, ladder.UID)</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">1</param>
                                                </condition>
                                                <condition id="-14" name="Compare variable" sid="855715226161055" type="System">
                                                    <param id="0" name="Variable">var</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="4" name="Set at XYZ" sid="375566903629520" type="TileArray">
                                                    <param id="0" name="X">f.Param(0)</param>
                                                    <param id="1" name="Y">f.Param(1) + loopindex</param>
                                                    <param id="2" name="Z">0</param>
                                                    <param id="3" name="Value">501</param>
                                                </action>
                                                <action id="-6" name="Set height" sid="944584251956851" type="ladder">
                                                    <param id="0" name="Height">tileMapSize + loopindex * tileMapSize</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="467593871906758">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="999716505791964" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="169452173835597" type="System">
                                                    <param id="0" name="Variable">var</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action disabled="1" id="-6" name="Set height" sid="768245731038338" type="ladder">
                                                    <param id="0" name="Height">Self.Height - 2</param>
                                                </action>
                                                <action id="0" name="Set text" sid="456359657121574" type="Text">
                                                    <param id="0" name="Text">loopindex</param>
                                                </action>
                                                <action disabled="1" id="4" name="Set at XYZ" sid="556471849847503" type="TileArray">
                                                    <param id="0" name="X">f.Param(0)</param>
                                                    <param id="1" name="Y">f.Param(1) + loopindex</param>
                                                    <param id="2" name="Z">0</param>
                                                    <param id="3" name="Value">0</param>
                                                </action>
                                                <action id="0" name="Call function" sid="198363631696023" type="f">
                                                    <param id="0" name="Name">&quot;tiles_updateAll&quot;</param>
                                                    <param id="1" name="Parameter {n}"></param>
                                                </action>
                                                <action id="-24" name="Stop loop" sid="382548526678334" type="System" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment></comment>
                <event-block sid="146800478553879">
                    <conditions>
                        <condition id="0" name="On function" sid="617218853546458" type="f">
                            <param id="0" name="Name">&quot;ladder_canPlace&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="590460484344539">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="597626726770057" type="System">
                                    <param id="0" name="First value">inventoryID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">4</param>
                                </condition>
                                <condition id="2" name="Compare at XYZ" sid="581662231261986" type="TileArray">
                                    <param id="0" name="X">f.Param(0)</param>
                                    <param id="1" name="Y">f.Param(1)</param>
                                    <param id="2" name="Z">0</param>
                                    <param id="3" name="Comparison">0</param>
                                    <param id="4" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="628291459096870" type="f">
                                    <param id="0" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>probably defunct</comment>
                <event-block sid="163702627843294">
                    <conditions>
                        <condition id="0" name="On function" sid="454071531735655" type="f">
                            <param id="0" name="Name">&quot;ladder_exists&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="166481894562666">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="539371050685130" type="ladder">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="X co-ordinate">f.Param(0) * tileMapSize + ladder_offsetX</param>
                                </condition>
                                <condition id="-2" name="Compare Y" sid="820812108377721" type="ladder">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="Y co-ordinate">f.Param(1) * tileMapSize</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="287057819784256" type="f">
                                    <param id="0" name="Value">0</param>
                                </action>
                                <action disabled="1" id="-9" name="Destroy" sid="767049418733783" type="ladder" />
                            </actions>
                        </event-block>
                        <event-block sid="372411130153040">
                            <conditions>
                                <condition id="-22" name="Else" sid="909251680107319" type="System" />
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="590128701924868" type="f">
                                    <param id="0" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>place at mouse</comment>
                <event-block sid="375308470193928">
                    <conditions>
                        <condition id="0" name="On function" sid="645932168813133" type="f">
                            <param id="0" name="Name">&quot;ladder_placeAtRadial&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="605280423293483">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="152220345195817" type="radialSeg">
                                    <param id="0" name="Instance variable">center</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="153673727362138" type="System">
                                    <param id="0" name="First value">f.Call(&quot;ladder_canPlace&quot;, (radialSeg.X / tileMapSize), (radialSeg.Y / tileMapSize))</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="390528563254169" type="f">
                                    <param id="0" name="Name">&quot;ladder_create&quot;</param>
                                    <param id="1" name="Parameter {n}">floor(radialSeg.X / tileMapSize){###}floor(radialSeg.Y / tileMapSize)</param>
                                </action>
                                <action id="0" name="Call function" sid="689591662174736" type="f">
                                    <param id="0" name="Name">&quot;inv_use&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>place with L key</comment>
                <event-block sid="240029840251336">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="683493382626784" type="Keyboard">
                            <param id="0" name="Key">76</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="525926796471318" type="System">
                            <param id="0" name="First value">f.Call(&quot;ladder_canPlace&quot;, floor(Mouse.X / tileMapSize), floor(Mouse.Y / tileMapSize))</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">1</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="701069143281010" type="System">
                            <param id="0" name="Variable">player_cursorMode</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="550154908882262" type="f">
                            <param id="0" name="Name">&quot;ladder_create&quot;</param>
                            <param id="1" name="Parameter {n}">floor(Mouse.X / tileMapSize){###}floor(Mouse.Y / tileMapSize)</param>
                        </action>
                        <action id="0" name="Call function" sid="951654929705891" type="f">
                            <param id="0" name="Name">&quot;inv_use&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-block sid="655597454013358">
            <conditions>
                <condition id="0" name="On key pressed" sid="359642572317457" type="Keyboard">
                    <param id="0" name="Key">85</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="759797681888677" type="f">
                    <param id="0" name="Name">&quot;tiles_updateAll&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
            </actions>
        </event-block>
        <event-block sid="826672097298658">
            <conditions>
                <condition id="0" name="On key pressed" sid="562676765188048" type="Keyboard">
                    <param id="0" name="Key">80</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="538350318494661" type="TileMap">
                    <param id="0" name="Unique ID">15</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Solid" id="0" name="Set enabled" sid="230056421066924" type="TileMap">
                    <param id="0" name="State">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="387645944291519">
            <conditions>
                <condition id="0" name="On key pressed" sid="500571303859536" type="Keyboard">
                    <param id="0" name="Key">89</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="214399372846485" type="f">
                    <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                    <param id="1" name="Parameter {n}">floor(Mouse.X / tileMapSize){###}floor(Mouse.Y / tileMapSize){###}0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="471314575263050">
            <conditions>
                <condition id="0" name="On key pressed" sid="720328970432877" type="Keyboard">
                    <param id="0" name="Key">84</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="330413199505682">
                    <conditions />
                    <actions>
                        <action id="4" name="Set at XYZ" sid="309963377947415" type="TileArray">
                            <param id="0" name="X">floor(Mouse.X / tileMapSize)</param>
                            <param id="1" name="Y">floor(Mouse.Y / tileMapSize)</param>
                            <param id="2" name="Z">0</param>
                            <param id="3" name="Value">0</param>
                        </action>
                        <action id="0" name="Erase tile" sid="462885811780214" type="TileMap">
                            <param id="0" name="Tile X">floor(Mouse.X / tileMapSize)</param>
                            <param id="1" name="Tile Y">floor(Mouse.Y / tileMapSize)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-group description="" sid="107422202580552" title="door">
            <sub-events>
                <event-block sid="476152720000047">
                    <conditions />
                    <actions />
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="972367259136897" title="slime">
            <sub-events>
                <event-block sid="171085233170774">
                    <conditions>
                        <condition id="4" name="On finished" sid="252911901695830" type="slime">
                            <param id="0" name="Animation">&quot;idle&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="747708638923189">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="412758623090560" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="294373853261978" type="slime">
                                    <param id="0" name="Animation">&quot;windup&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="778160114569649">
                            <conditions>
                                <condition id="-22" name="Else" sid="736572434213353" type="System" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="776180620328795" type="slime">
                                    <param id="0" name="Animation">&quot;idle&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="862882159767992">
                    <conditions>
                        <condition id="4" name="On finished" sid="437687507855075" type="slime">
                            <param id="0" name="Animation">&quot;windup&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="938208570200720" type="slime">
                            <param id="0" name="Instance variable">aiDirection</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition behavior="Platform" id="2" name="Is on floor" sid="410820766869252" type="slime" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="495460279892176" type="slime">
                            <param id="0" name="Animation">&quot;jump&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action behavior="Platform" id="9" name="Set vector Y" sid="266809618734987" type="slime">
                            <param id="0" name="Vector Y">-100</param>
                        </action>
                        <action behavior="Platform" id="8" name="Set vector X" sid="672399665840443" type="slime">
                            <param id="0" name="Vector X">100 * Self.aiDirection</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="273087078715027">
                    <conditions>
                        <condition behavior="Platform" id="2" inverted="1" name="Is on floor" sid="503401644701311" type="slime" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="878225536106213">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="125598266065707" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">-1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Platform" id="7" name="Simulate control" sid="253337994674611" type="slime">
                                    <param id="0" name="Control">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="684018689242727">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="583962216141759" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Platform" id="7" name="Simulate control" sid="642750703127096" type="slime">
                                    <param id="0" name="Control">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="884665295254692">
                    <conditions>
                        <condition behavior="Platform" id="9" name="On landed" sid="663401897973729" type="slime" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="744049783461115">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="199222707882156" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="800145276607130" type="slime">
                                    <param id="0" name="Animation">&quot;windup&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="952084138781619">
                            <conditions>
                                <condition id="-22" name="Else" sid="496279992900537" type="System" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="889061427183743" type="slime">
                                    <param id="0" name="Animation">&quot;idle&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="242672512961626">
                    <conditions>
                        <condition id="-1" name="Compare X" sid="809255233062251" type="slime">
                            <param id="0" name="Comparison">2</param>
                            <param id="1" name="X co-ordinate">player.X</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="442254547638753" type="slime">
                            <param id="0" name="Instance variable">aiDirection</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">-1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="904312827452989" type="slime">
                            <param id="0" name="Instance variable">aiDirection</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="183296701079613">
                    <conditions>
                        <condition id="-1" name="Compare X" sid="788617923753826" type="slime">
                            <param id="0" name="Comparison">4</param>
                            <param id="1" name="X co-ordinate">player.X</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="777818197925404" type="slime">
                            <param id="0" name="Instance variable">aiDirection</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="247097635924232" type="slime">
                            <param id="0" name="Instance variable">aiDirection</param>
                            <param id="1" name="Value">-1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
