<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>gameLogic</name>
    <events>
        <comment># gameLogic&#x0D;&#x0A;# gl_ build_&#x0D;&#x0A;# turrets, doors etc. The part of the game that is game.&#x0D;&#x0A;</comment>
        <include>tileEvents</include>
        <include>turretEvents</include>
        <include>playerEvents</include>
        <include>projectileEvents</include>
        <include>inventoryEvents</include>
        <variable constant="0" name="ladder_offsetX" sid="951898758445304" static="0" type="number">4</variable>
        <event-group description="" sid="792767968556085" title="ladder">
            <sub-events>
                <comment>place at mouse</comment>
                <event-block sid="375308470193928">
                    <conditions>
                        <condition id="0" name="On function" sid="645932168813133" type="f">
                            <param id="0" name="Name">&quot;ladder_placeAtRadial&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="637499115617182" type="f">
                            <param id="0" name="Name">&quot;gl_buildAtRadial&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;build_ladderOptions&quot;{###}&quot;ladder_create&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="817455153067537">
                    <conditions>
                        <condition id="0" name="On function" sid="226941830366939" type="f">
                            <param id="0" name="Name">&quot;ladder_create&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="686194583953082">
                            <conditions />
                            <actions>
                                <action id="-3" name="Create object" sid="207325102406844" type="System">
                                    <param id="0" name="Object to create">ladder</param>
                                    <param id="1" name="Layer">&quot;tiles&quot;</param>
                                    <param id="2" name="X">f.Param(0) * tileMapSize + ladder_offsetX</param>
                                    <param id="3" name="Y">f.Param(1) * tileMapSize</param>
                                </action>
                                <action id="-1" name="Set X" sid="734481971214577" type="ladderPlatform">
                                    <param id="0" name="X">Self.X - ladder_offsetX</param>
                                </action>
                                <action id="4" name="Set at XYZ" sid="797139181368912" type="TileArray">
                                    <param id="0" name="X">f.Param(0)</param>
                                    <param id="1" name="Y">f.Param(1)</param>
                                    <param id="2" name="Z">0</param>
                                    <param id="3" name="Value">501</param>
                                </action>
                            </actions>
                            <sub-events>
                                <variable constant="0" name="var" sid="897044752421152" static="0" type="number">0</variable>
                                <event-block sid="111872760935872">
                                    <conditions>
                                        <condition id="-10" name="For" sid="215723581184849" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">1</param>
                                            <param id="2" name="End index">5</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="465073469984598">
                                            <conditions>
                                                <condition id="2" name="Compare at XYZ" sid="845569301262973" type="TileArray">
                                                    <param id="0" name="X">f.Param(0)</param>
                                                    <param id="1" name="Y">f.Param(1)+loopindex</param>
                                                    <param id="2" name="Z">0</param>
                                                    <param id="3" name="Comparison">0</param>
                                                    <param id="4" name="Value">0</param>
                                                </condition>
                                                <condition disabled="1" id="-8" name="Compare two values" sid="156047643121655" type="System">
                                                    <param id="0" name="First value">f.Call(&quot;ladder_exists&quot;, f.Param(0), f.Param(1) + loopindex, ladder.UID)</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">1</param>
                                                </condition>
                                                <condition id="-14" name="Compare variable" sid="855715226161055" type="System">
                                                    <param id="0" name="Variable">var</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="4" name="Set at XYZ" sid="375566903629520" type="TileArray">
                                                    <param id="0" name="X">f.Param(0)</param>
                                                    <param id="1" name="Y">f.Param(1) + loopindex</param>
                                                    <param id="2" name="Z">0</param>
                                                    <param id="3" name="Value">501</param>
                                                </action>
                                                <action id="-6" name="Set height" sid="944584251956851" type="ladder">
                                                    <param id="0" name="Height">tileMapSize + loopindex * tileMapSize</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="467593871906758">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="999716505791964" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="169452173835597" type="System">
                                                    <param id="0" name="Variable">var</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                                <action disabled="1" id="-6" name="Set height" sid="768245731038338" type="ladder">
                                                    <param id="0" name="Height">Self.Height - 2</param>
                                                </action>
                                                <action id="0" name="Set text" sid="456359657121574" type="Text">
                                                    <param id="0" name="Text">loopindex</param>
                                                </action>
                                                <action disabled="1" id="4" name="Set at XYZ" sid="556471849847503" type="TileArray">
                                                    <param id="0" name="X">f.Param(0)</param>
                                                    <param id="1" name="Y">f.Param(1) + loopindex</param>
                                                    <param id="2" name="Z">0</param>
                                                    <param id="3" name="Value">0</param>
                                                </action>
                                                <action id="0" name="Call function" sid="198363631696023" type="f">
                                                    <param id="0" name="Name">&quot;tiles_updateAll&quot;</param>
                                                    <param id="1" name="Parameter {n}"></param>
                                                </action>
                                                <action id="-24" name="Stop loop" sid="382548526678334" type="System" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment></comment>
                <comment>probably defunct</comment>
                <event-block sid="163702627843294">
                    <conditions>
                        <condition id="0" name="On function" sid="454071531735655" type="f">
                            <param id="0" name="Name">&quot;ladder_exists&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="166481894562666">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="539371050685130" type="ladder">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="X co-ordinate">f.Param(0) * tileMapSize + ladder_offsetX</param>
                                </condition>
                                <condition id="-2" name="Compare Y" sid="820812108377721" type="ladder">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="Y co-ordinate">f.Param(1) * tileMapSize</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="287057819784256" type="f">
                                    <param id="0" name="Value">0</param>
                                </action>
                                <action disabled="1" id="-9" name="Destroy" sid="767049418733783" type="ladder" />
                            </actions>
                        </event-block>
                        <event-block sid="372411130153040">
                            <conditions>
                                <condition id="-22" name="Else" sid="909251680107319" type="System" />
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="590128701924868" type="f">
                                    <param id="0" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-block disabled="1" sid="655597454013358">
            <conditions>
                <condition id="0" name="On key pressed" sid="359642572317457" type="Keyboard">
                    <param id="0" name="Key">85</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="759797681888677" type="f">
                    <param id="0" name="Name">&quot;tiles_updateAll&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
            </actions>
        </event-block>
        <event-block disabled="1" sid="826672097298658">
            <conditions>
                <condition id="0" name="On key pressed" sid="562676765188048" type="Keyboard">
                    <param id="0" name="Key">80</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="538350318494661" type="TileMap">
                    <param id="0" name="Unique ID">15</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Solid" id="0" name="Set enabled" sid="230056421066924" type="TileMap">
                    <param id="0" name="State">0</param>
                </action>
            </actions>
        </event-block>
        <event-block disabled="1" sid="387645944291519">
            <conditions>
                <condition id="0" name="On key pressed" sid="500571303859536" type="Keyboard">
                    <param id="0" name="Key">89</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="214399372846485" type="f">
                    <param id="0" name="Name">&quot;tiles_addTile&quot;</param>
                    <param id="1" name="Parameter {n}">floor(Mouse.X / tileMapSize){###}floor(Mouse.Y / tileMapSize){###}0</param>
                </action>
            </actions>
        </event-block>
        <event-block disabled="1" sid="471314575263050">
            <conditions>
                <condition id="0" name="On key pressed" sid="720328970432877" type="Keyboard">
                    <param id="0" name="Key">84</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block disabled="1" sid="330413199505682">
                    <conditions />
                    <actions>
                        <action id="4" name="Set at XYZ" sid="309963377947415" type="TileArray">
                            <param id="0" name="X">floor(Mouse.X / tileMapSize)</param>
                            <param id="1" name="Y">floor(Mouse.Y / tileMapSize)</param>
                            <param id="2" name="Z">0</param>
                            <param id="3" name="Value">0</param>
                        </action>
                        <action id="0" name="Erase tile" sid="462885811780214" type="TileMap">
                            <param id="0" name="Tile X">floor(Mouse.X / tileMapSize)</param>
                            <param id="1" name="Tile Y">floor(Mouse.Y / tileMapSize)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-group description="" sid="107422202580552" title="door">
            <sub-events>
                <event-block sid="451167972411661">
                    <conditions>
                        <condition id="0" name="On function" sid="993083454414196" type="f">
                            <param id="0" name="Name">&quot;door_create&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="640211298390305">
                            <conditions />
                            <actions>
                                <action id="-3" name="Create object" sid="183444146633667" type="System">
                                    <param id="0" name="Object to create">door</param>
                                    <param id="1" name="Layer">&quot;tiles&quot;</param>
                                    <param id="2" name="X">f.Param(0) * tileMapSize</param>
                                    <param id="3" name="Y">f.Param(1) * tileMapSize</param>
                                </action>
                                <action id="4" name="Set at XYZ" sid="360358952632510" type="TileArray">
                                    <param id="0" name="X">f.Param(0)</param>
                                    <param id="1" name="Y">f.Param(1)</param>
                                    <param id="2" name="Z">0</param>
                                    <param id="3" name="Value">501</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="697417080780078">
                    <conditions>
                        <condition id="0" name="On function" sid="949875335391802" type="f">
                            <param id="0" name="Name">&quot;door_placeAtRadial&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="649175941806537" type="f">
                            <param id="0" name="Name">&quot;gl_buildAtRadial&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;build_doorOptions&quot;{###}&quot;door_create&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="972367259136897" title="slime">
            <sub-events>
                <event-block sid="781752437243922">
                    <conditions>
                        <condition id="-18" name="On created" sid="968407660153695" type="slime" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="400555808119198" type="slime">
                            <param id="0" name="Instance variable">jumpHeight</param>
                            <param id="1" name="Value">random(50, 130)</param>
                        </action>
                        <action id="-10" name="Set value" sid="611632286771294" type="slime">
                            <param id="0" name="Instance variable">jumpLength</param>
                            <param id="1" name="Value">random(50, 130)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="171085233170774">
                    <conditions>
                        <condition id="4" name="On finished" sid="252911901695830" type="slime">
                            <param id="0" name="Animation">&quot;idle&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="747708638923189">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="412758623090560" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="294373853261978" type="slime">
                                    <param id="0" name="Animation">&quot;windup&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="778160114569649">
                            <conditions>
                                <condition id="-22" name="Else" sid="736572434213353" type="System" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="776180620328795" type="slime">
                                    <param id="0" name="Animation">&quot;idle&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="862882159767992">
                    <conditions>
                        <condition id="4" name="On finished" sid="437687507855075" type="slime">
                            <param id="0" name="Animation">&quot;windup&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="938208570200720" type="slime">
                            <param id="0" name="Instance variable">aiDirection</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition behavior="Platform" id="2" name="Is on floor" sid="410820766869252" type="slime" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="495460279892176" type="slime">
                            <param id="0" name="Animation">&quot;jump&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action behavior="Platform" id="9" name="Set vector Y" sid="266809618734987" type="slime">
                            <param id="0" name="Vector Y">-self.jumpHeight</param>
                        </action>
                        <action behavior="Platform" id="8" name="Set vector X" sid="672399665840443" type="slime">
                            <param id="0" name="Vector X">self.jumpLength * Self.aiDirection</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="273087078715027">
                    <conditions>
                        <condition behavior="Platform" id="2" inverted="1" name="Is on floor" sid="503401644701311" type="slime" />
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="3" name="Set deceleration" sid="880140435489622" type="slime">
                            <param id="0" name="Deceleration">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="878225536106213">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="125598266065707" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">-1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Platform" id="7" name="Simulate control" sid="253337994674611" type="slime">
                                    <param id="0" name="Control">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="684018689242727">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="583962216141759" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Platform" id="7" name="Simulate control" sid="642750703127096" type="slime">
                                    <param id="0" name="Control">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="541902994912067">
                    <conditions>
                        <condition behavior="Platform" id="2" name="Is on floor" sid="189727390638246" type="slime" />
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="3" name="Set deceleration" sid="525816583021652" type="slime">
                            <param id="0" name="Deceleration">300</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="884665295254692">
                    <conditions>
                        <condition behavior="Platform" id="9" name="On landed" sid="663401897973729" type="slime" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="744049783461115">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="199222707882156" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="800145276607130" type="slime">
                                    <param id="0" name="Animation">&quot;windup&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="952084138781619">
                            <conditions>
                                <condition id="-22" name="Else" sid="496279992900537" type="System" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="889061427183743" type="slime">
                                    <param id="0" name="Animation">&quot;idle&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="832022514058960">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="563967246193949" type="slime">
                            <param id="0" name="Instance variable">aiFollow</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;player&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="242672512961626">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="809255233062251" type="slime">
                                    <param id="0" name="Comparison">2</param>
                                    <param id="1" name="X co-ordinate">player.X</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="442254547638753" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">-1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="904312827452989" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="183296701079613">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="788617923753826" type="slime">
                                    <param id="0" name="Comparison">4</param>
                                    <param id="1" name="X co-ordinate">player.X</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="777818197925404" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="247097635924232" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Value">-1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="589060841778127">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="778787637907346" type="slime">
                            <param id="0" name="Instance variable">aiFollow</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;core&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="885706746245583">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="768697495719498" type="slime">
                                    <param id="0" name="Comparison">2</param>
                                    <param id="1" name="X co-ordinate">core.X</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="645352047672155" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">-1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="155112397331388" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="706314938394381">
                            <conditions>
                                <condition id="-1" name="Compare X" sid="276652444455312" type="slime">
                                    <param id="0" name="Comparison">4</param>
                                    <param id="1" name="X co-ordinate">core.X</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="181790955619998" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="876920773616722" type="slime">
                                    <param id="0" name="Instance variable">aiDirection</param>
                                    <param id="1" name="Value">-1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="885048905896948">
                    <conditions>
                        <condition id="0" name="On function" sid="234801034301148" type="f">
                            <param id="0" name="Name">&quot;slime_knockback&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="543772716608958">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="127839914832762" type="slime">
                                    <param id="0" name="Unique ID">f.Param(0)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Platform" id="9" name="Set vector Y" sid="732677947194946" type="slime">
                                    <param id="0" name="Vector Y">-100</param>
                                </action>
                                <action behavior="Platform" id="8" name="Set vector X" sid="310628277677474" type="slime">
                                    <param id="0" name="Vector X">100 * f.Param(1)</param>
                                </action>
                                <action id="4" name="Set animation" sid="125981801825876" type="slime">
                                    <param id="0" name="Animation">&quot;jump&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <variable constant="0" name="gl_waveNumber" sid="238194452379928" static="0" type="number">0</variable>
        <variable constant="0" name="gl_nextWave" sid="613627788533310" static="0" type="number">60</variable>
        <event-group description="" sid="927865033838671" title="enemies">
            <sub-events>
                <event-block sid="901492207413729">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="529441553561900" type="player">
                            <param id="0" name="Object">enemyTraditional</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="574974538460234" type="f">
                            <param id="0" name="Name">&quot;player_hit&quot;</param>
                            <param id="1" name="Parameter {n}">enemyTraditional.damageToPlayer</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Damage</comment>
                <event-block sid="531635302755859">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="976326513484811" type="enemyTraditional">
                            <param id="0" name="Instance variable">health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="229625175170580" type="enemyTraditional">
                            <param id="0" name="Object">Ashes</param>
                            <param id="1" name="Layer">3</param>
                            <param id="2" name="Image point">0</param>
                        </action>
                        <action id="-9" name="Destroy" sid="310729802550663" type="enemyTraditional" />
                    </actions>
                </event-block>
                <comment>Spawning</comment>
                <event-block sid="592509091673854">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="910707580905812" type="System">
                            <param id="0" name="Interval (seconds)">1.0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-11" name="Subtract from" sid="768021406519250" type="System">
                            <param id="0" name="Variable">gl_nextWave</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="464885575746028">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="772960177223779" type="System">
                            <param id="0" name="Variable">gl_nextWave</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="480847563867338" type="System">
                            <param id="0" name="Variable">gl_nextWave</param>
                            <param id="1" name="Value">random(60, 100)</param>
                        </action>
                        <action id="-10" name="Add to" sid="949718058518170" type="System">
                            <param id="0" name="Variable">gl_waveNumber</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="180457959680291">
                            <conditions>
                                <condition id="-11" name="For Each" sid="231465604393257" type="System">
                                    <param id="0" name="Object">spawner</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="355562411729847">
                                    <conditions>
                                        <condition id="-10" name="For" sid="598429795210597" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">1</param>
                                            <param id="2" name="End index">random(1+(gl_waveNumber*2), 5+(gl_waveNumber*2))</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="419023422277173" type="System">
                                            <param id="0" name="Object to create">slime</param>
                                            <param id="1" name="Layer">3</param>
                                            <param id="2" name="X">spawner.X + random(-5, 5)</param>
                                            <param id="3" name="Y">spawner.Y</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <variable constant="0" name="gl_core_health" sid="234525129792465" static="0" type="number">1</variable>
        <event-group description="" sid="627188919600315" title="core">
            <sub-events>
                <event-block sid="429036323677409">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="957590590295300" type="enemyTraditional">
                            <param id="0" name="Object">core</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-11" name="Subtract from" sid="812769513124597" type="System">
                            <param id="0" name="Variable">gl_core_health</param>
                            <param id="1" name="Value">0.1</param>
                        </action>
                        <action id="0" name="Call function" sid="438389714904416" type="f">
                            <param id="0" name="Name">&quot;gui_updateCoreHealth&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="574815670128680" type="f">
                            <param id="0" name="Name">&quot;gui_showStatusText&quot;</param>
                            <param id="1" name="Parameter {n}">4{###}core.X{###}core.Y{###}&quot;Core damage!&quot;{###}rgb(30, 40, 230)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-block sid="753883938744796">
            <conditions>
                <condition id="-7" name="Compare instance variable" sid="820212173479462" type="player">
                    <param id="0" name="Instance variable">health</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Go to layout" sid="552936605068583" type="System">
                    <param id="0" name="Layout">gameover</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="345723458135038">
            <conditions>
                <condition id="-14" name="Compare variable" sid="580920760708061" type="System">
                    <param id="0" name="Variable">gl_core_health</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Go to layout" sid="507195920922454" type="System">
                    <param id="0" name="Layout">gameover</param>
                </action>
            </actions>
        </event-block>
        <event-group description="" sid="771841247538446" title="machines_base">
            <sub-events>
                <event-block sid="540409231912781">
                    <conditions>
                        <condition id="-18" name="On created" sid="158676440739112" type="machine" />
                    </conditions>
                    <actions>
                        <action id="2" name="Stop" sid="479528941937821" type="machine" />
                    </actions>
                </event-block>
                <event-block sid="267605170377613">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="877996483603018" type="itemEntity">
                            <param id="0" name="Object">machine_input</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="183890060219655" type="machine">
                            <param id="0" name="Instance variable">accepts</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">itemEntity.itemID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="176067035315924" type="itemEntity" />
                        <action id="3" name="Start" sid="466807952140756" type="machine">
                            <param id="0" name="From">0</param>
                        </action>
                        <action id="-16" name="Wait" sid="302905706863643" type="System">
                            <param id="0" name="Seconds">machine.delay</param>
                        </action>
                        <action id="0" name="Call function" sid="472487644037779" type="f">
                            <param id="0" name="Name">&quot;item_spawn&quot;</param>
                            <param id="1" name="Parameter {n}">machine.ImagePointX(1){###}machine.ImagePointY(1){###}machine.outputs</param>
                        </action>
                        <action id="2" name="Stop" sid="977390926362963" type="machine" />
                    </actions>
                </event-block>
                <event-block sid="553037320081321">
                    <conditions>
                        <condition id="0" name="On function" sid="688874457896976" type="f">
                            <param id="0" name="Name">&quot;gl_createMachine&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="453742061081430" type="System">
                            <param id="0" name="Object to create">machine</param>
                            <param id="1" name="Layer">&quot;tiles&quot;</param>
                            <param id="2" name="X">f.Param(0)</param>
                            <param id="3" name="Y">f.Param(1)</param>
                        </action>
                        <action id="-10" name="Set value" sid="121235575478379" type="machine">
                            <param id="0" name="Instance variable">accepts</param>
                            <param id="1" name="Value">f.Param(2)</param>
                        </action>
                        <action id="-10" name="Set value" sid="294361302101207" type="machine">
                            <param id="0" name="Instance variable">outputs</param>
                            <param id="1" name="Value">f.Param(3)</param>
                        </action>
                        <action id="4" name="Set at XYZ" sid="868226043728409" type="TileArray">
                            <param id="0" name="X">f.Param(0)</param>
                            <param id="1" name="Y">f.Param(1)</param>
                            <param id="2" name="Z">0</param>
                            <param id="3" name="Value">700</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="224263640655060" title="building">
            <sub-events>
                <comment>buildAtRadial(optionsFunction, buildFunction)</comment>
                <event-block sid="775077205344575">
                    <conditions>
                        <condition id="0" name="On function" sid="978597967529305" type="f">
                            <param id="0" name="Name">&quot;gl_buildAtRadial&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="result" sid="893820933722007" static="0" type="text"></variable>
                        <event-block sid="398052055453301">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="590479713159127" type="radialSeg">
                                    <param id="0" name="Instance variable">center</param>
                                </condition>
                                <condition id="2" name="Compare at XYZ" sid="671175474103017" type="TileArray">
                                    <param id="0" name="X">(radialSeg.X / tileMapSize)</param>
                                    <param id="1" name="Y">(radialSeg.Y / tileMapSize)</param>
                                    <param id="2" name="Z">0</param>
                                    <param id="3" name="Comparison">0</param>
                                    <param id="4" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="126828740417173" type="System">
                                    <param id="0" name="Variable">result</param>
                                    <param id="1" name="Value">f.Call(f.Param(0))</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="791599927820704">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="340892589539880" type="System">
                                            <param id="0" name="Variable">result</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">&quot;&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="101768889555005" type="f">
                                            <param id="0" name="Name">f.Param(1)</param>
                                            <param id="1" name="Parameter {n}">floor(radialSeg.X / tileMapSize){###}floor(radialSeg.Y / tileMapSize){###}result</param>
                                        </action>
                                        <action id="0" name="Call function" sid="358395497806463" type="f">
                                            <param id="0" name="Name">&quot;inv_takeList&quot;</param>
                                            <param id="1" name="Parameter {n}">result</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="578184356582098">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="815497788099656" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="292439628843759" type="f">
                                            <param id="0" name="Name">&quot;gui_showStatusText&quot;</param>
                                            <param id="1" name="Parameter {n}">2{###}mouse.X{###}mouse.Y{###}&quot;Resources not right!&quot;{###}rgb(255, 0, 0)</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="935299529149858">
                            <conditions>
                                <condition id="-22" name="Else" sid="869143897260548" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="650250647729247" type="f">
                                    <param id="0" name="Name">&quot;gui_showStatusText&quot;</param>
                                    <param id="1" name="Parameter {n}">2{###}mouse.X{###}mouse.Y{###}&quot;Cannot build there!&quot;{###}rgb(255, 0, 0)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>&#x0D;&#x0A;---&#x0D;&#x0A;Building helper functions&#x0D;&#x0A;These functions will be executed to determine which version of the object to build based on the player&apos;s inventory&#x0D;&#x0A;---&#x0D;&#x0A;</comment>
                <event-block sid="327123974697188">
                    <conditions>
                        <condition id="0" name="On function" sid="659086979883354" type="f">
                            <param id="0" name="Name">&quot;build_ladderOptions&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="699206277554996">
                            <conditions />
                            <actions>
                                <action id="1" name="Set return value" sid="975645338830962" type="f">
                                    <param id="0" name="Value">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="487294313224582">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="541582910637276" type="System">
                                    <param id="0" name="First value">f.Call(&quot;inv_hasList&quot;, &quot;4&quot;)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="982602478988277" type="f">
                                    <param id="0" name="Value">&quot;4&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="388852022671988">
                    <conditions>
                        <condition id="0" name="On function" sid="861396629987826" type="f">
                            <param id="0" name="Name">&quot;build_machineOptions&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="528061345794015">
                            <conditions />
                            <actions>
                                <action id="1" name="Set return value" sid="981720707416295" type="f">
                                    <param id="0" name="Value">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="666434143071991">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="821953221335574" type="System">
                                    <param id="0" name="First value">f.Call(&quot;inv_hasList&quot;, &quot;4;5&quot;)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="601807049099887" type="f">
                                    <param id="0" name="Value">&quot;4;5&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="182560039687123">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="867877729624140" type="System">
                                    <param id="0" name="First value">f.Call(&quot;inv_hasList&quot;, &quot;1;4;5&quot;)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="178916668073047" type="f">
                                    <param id="0" name="Value">&quot;1;4;5&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="323686599934388">
                    <conditions>
                        <condition id="0" name="On function" sid="499351534034582" type="f">
                            <param id="0" name="Name">&quot;build_doorOptions&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="241935399448968">
                            <conditions />
                            <actions>
                                <action id="1" name="Set return value" sid="483055789909875" type="f">
                                    <param id="0" name="Value">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="726921234267822">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="979393058478718" type="System">
                                    <param id="0" name="First value">f.Call(&quot;inv_hasList&quot;, &quot;4&quot;)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="372047275930888" type="f">
                                    <param id="0" name="Value">&quot;4&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="302177775333323">
                    <conditions>
                        <condition id="0" name="On function" sid="852818464704699" type="f">
                            <param id="0" name="Name">&quot;build_turretOptions&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="595392083254915">
                            <conditions />
                            <actions>
                                <action id="1" name="Set return value" sid="802009898512149" type="f">
                                    <param id="0" name="Value">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="455015459442184">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="560832056583615" type="System">
                                    <param id="0" name="First value">f.Call(&quot;inv_hasList&quot;, &quot;5&quot;)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Set return value" sid="213696582906027" type="f">
                                    <param id="0" name="Value">&quot;5&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="945222913529490" title="machines_implement">
            <sub-events>
                <event-block sid="392866788987976">
                    <conditions />
                    <actions />
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
